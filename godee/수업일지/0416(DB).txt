Ch05 테이블 조인하기
-----------
조인 

여러 테이블에 저장된 데이터를 한번에 조회해야할 필요가 있을 때 사용합니다. 

-----------
카디시안 곱(Cartesian Product)

조인 조건을 생략한 경우 행의 모든 조합을 표시하는 카디시안 곱이 생성이 됩니다. 

특별한 키워드 없이 SELCET문의 FROM 절에 employee 테이블과 
deplartment 테이블을 콤마로 연결하고 연속하여 기술 합니다. 

-------
조인의 유형
 
오라클 8i 이전 : *EQUI JOIN, NON-EQUl JOIN, OUTER JOIN,SELF JOIN
ANSI 표준 SQL 조인 : CROSS JOIN, NATURAL JOIN, JOIN USING, OUTER JOIN
----------------
*EQUI JOIN 

조인 대상 테이블에서 공총 컬럼을 '='(equal) 비교를 통해 같은 값을 가지는 행을 연결하여 결과를 행하는 조인 방법입니다. 


SELECT table1.column, table2.column
FROM table1, table2
WHERE table1.column1 = table2.column2;

, =이 중요

조인 대상이 되는 테이블에서 공통적으로 존재하는 컬럼 값이 같은 값을 가지는 조건(=)에 대해 조인결과를 얻는 것을 EQUl JOIN이라고 합니다. 

컬럼명이 같으면 혼란이 오기 때문에 컬럼명 앞에 테이블명을 기술 합니다. 


--------------
*EQUI JOIN 

테이블에 별칭 사용하기

테이블의 별명은 30자까지 가능하지만 너무 길지않게 작성합니다. 

FROM절에서 테이블 명을 명시하고 공백을 둔 다음 테이블 별칭을 지정합니다. 

**하나의 SQL 명령문에서 테이블명과 별칭을 혼용할 수 없습니다. 

테이블의 별칭은 해당 SQL명령문 내에서만 유효합니다. 

-------------
*EQUI JOIN - NATURAL JOIN

NATURAL JOIN는 오라클 9i 이전에 EQUI JOIN으로 사용하던 것을 대신해서 사용하는 조인 방식입니다. 

SELECET table1.column, table2.column

FROM table1 NATUAL JOIN table2;
------------------------
*EQUI JOIN -JOIN~USING

USING 절에 조인 대상이 되는 컬럼을 지정합니다. 

SELECET table1.column, table2.column

FROM table1 JOIN table2;

USING(column);


------------------------

중요~!!

NATURAL JOIN은 조인에 참여하는 두 테이블 모두에서 동일한 이름과 테이블 유형을 가진 컬럼이 존재해야 한다는 조건이 있습니다. 

만일 데이터 유형이 일치하지 않을 경우네는 USING 절을 사용하여 EQUI JOIN에 사용될 컬럼명만 지정하여 사용합니다. 

***컬럼명은 조인 대상 테이블에서 동일한 이름으로 정의 되어 있어야 합니다. 

-------------------------

EQUL JOIN -JOIN~ON

NATURAL JOIN의 조인 조건은 기본적으로 같은 이름을 가진 컬럼에 대해서 동일한 값을 갖는 로우 끼리 결합하는 조입니다. 

만일 임의의 조건을 지정하거나 조일할 컬럼을 지정하려면 ON절을 사용합니다. 

***조인 조건만을 ON절에 기술하고 다른 검색이나 필터 조건은 WHERE절에 분리해서 기술할 수 있씁니다. 

-----------------------
NON-EQUL JOIN

NON-EQUL JOIN은 조인 조건에 특정 범위 내에 있는지를 조사하기 위해 사용합니다. 

WHERE절에 '<', 'BETWEEN a AND b와 같이' '='조건이 아닌 연산자를 사용합니다. 

---------------------
SELF JOIN 하나의 테이블에 있는 컬럼끼지 연결해야 하는 조인이 필요한 경우 사용합니다. 

자기 자신과 조인을 맺는 것을 말합니다. 

조인 대상 테이블이 자신 하나라는 것 이외에는 EQUI JOIN과 동일 합니다. 

------------------
보충설명 

사원 테이블에는 manager 컬럼이 존재하는데 이컬럼에는 각 사원의 담당매니저의 사원번호가 저장되어 있습니다. 

'SCOTT' 사원의 매니저 이름을 검색하려면 'SCOTT'의 매니저 사원번호가 필요하고 사원번호로 사원이름을 조회해야합니다

그런데 'SCOTT'의 매니저 사원번화와 사원번호로 사원이름을 조회하려는 테이블이 동일한 테이블이기 때문에 테이블의 별칭을 사용하야 SELF JOIN을 해야합니다.
-----------------

OUTER JOIN

EQUI JOIN에서 양쪽 컬럼값 중 하나가 NULL이지만 조인결과로 출력할 필요가 있는 경우에 OUTER JOIN을 사용합니다 

WHERE 절의 조인 조건에서 OUTER JOIN 연산자'(+)' 기호를 사용합니다 .

조인 조건문에서 NULL이 출력되는데 테이블의 컬럼에 '(+)' 기호를 추가합니다. 

SELECT table1.column, table2.column
FROM table1, table2
WHERE table1.column (+) = table2.column;
OR
	table1.column = table2.column(+)


----------------
JOIN ~ON절

오라클 9i 버전부터 outer join 절을 join~on 절과 함께 사용할 수 있습니다.

SELECT table1.column, table2.column
FROM table1[ RIGHT| LEFT| FULL] OUTER JOIN table2
ON	table1.column = table2.column;

보충설명

ANSI 조인에서는 OUTER JOIN이 그전까지 지원되지 않았던
FULL 까지 지원하여 LEFT,RIGHT,FULL 3가지를 지원하고 있습니다. 
LEFT OUTER JOIN은 FROM 절 왼쪽에 위치한 테이블이 NULL값을 가질경우세 사용합니다. WHERE 절의 오른쪽 편에 
'(+)' 기호를 추가한 것과 동일함니다. 