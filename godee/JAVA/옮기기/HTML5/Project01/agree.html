<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="author" content="김예찬">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/common.css">
    <link rel="stylesheet" href="./css/agree.css">
    <title>이용약관</title>
    <script>


        // 수정사항
        // 필수버튼 해제시 전체동의버튼도 함께 해제
        // 모든버튼 선택시 전체동의 버튼 선택


        /*
        메서드 이름 : mainCheck
        설명 : 모두동의 버튼 클릭시 작동되는 함수, 모든 리스트의 체크를 동시에 실행해주는 반복문을 포함
        매개변수 : 없음
        반환값 : 없음
        */        
        function mainCheck() {
            var mainList = document.getElementById("chkAll");
            var chkList = document.getElementsByName("checkList");
            // console.log(chkList);
            if(mainList.checked == true) {
                for(var i = 0; i < chkList.length ; i++) {
                    chkList[i].checked = true;
                }
            } else {
                for(var i = 0; i < chkList.length ; i++) {
                    chkList[i].checked = false;
            } 
        }
        }  

                /*
        메서드 이름 : listCheck(self)
        설명 : 모두동의 버튼 클릭시 작동되는 함수, 모든 리스트의 체크를 동시에 실행해주는 반복문을 포함합니다.
        매개변수 : 이 메서드를 호출하는 요소들의 번호를 매개변수로 받습니다.
        반환값 : 없음
        */        
        function listCheck(self) {
            // 모든 버튼들이 checked인 상태에서 전체동의버튼을 선택으로 돌려주기 위한 지역변수입니다.
            var count = 0;
            // 전체선택버튼을 제외한 모든 리스트의 버튼 값을 변수에 담아둡니다.
            var check = document.querySelectorAll('.chk');
            // 선택된 요소를 특정지어 변수에 담아줍니다.
            var chkList =  document.getElementsByName("checkList")[self];
            // 전체선택버튼을 특정지어 변수에 담아줍니다.
            var mainList = document.getElementById("chkAll");
            // console.log(chkLists.checked);
            // console.log(mainList.checked);
            if (chkList.checked) {
                // console.log(chkLists.checked);
                // console.log(mainList.checked);
                for (var i = 0; i < check.length; i++ ) {
                    if (check[i].checked) {
                        count++               
                    } 
                } console.log("체크된 갯수는 " +count);
                 if (count == 4) {
                    mainList.checked = true;
                }
            } else {
                mainList.checked = false;
                // console.log(chkLists.checked);
                // console.log(mainList.checked);
            } 
        }


        /*
        메서드 이름 : goRegiterPage()
        설명: 이용약관을 동의하고 회원가입창으로 가기전 최종확인 하는 함수. 필수 항목들의 상태가 체크되어 있지 않다면 체크를 요구하는 alert창을 발생해줍니다.
        매개변수 : 없음
        반환값 : 링크 테크의 href 값을 상황에 맞추어 반환
        */
        function goRegiterPage() {
            // 모든 checkList의 요소들을 담아 주는 변수
            var chkList = document.getElementsByName("checkList");
            // 변수에 값이 잘 들어가 있는지 확인해주는 역활
            console.log(chkList);
            if (!chkList[0].checked || !chkList[1].checked) {
                window.alert('동의 항목(필수)는 반드시 체크하셔야 다음 단계로 넘어갑니다.');
                return "#";
                } else {return "./register.html";}
                
        }
    </script>
</head>
<body>
    <!-- all -->
    <div id="wrap">
        <!-- header -->
        <header id="header" role="banner">
            <!-- banner -->
            <h1><a href="#">Kimyechan</a></h1>
            <!-- //banner -->
            <!-- lang -->
            <div class="lang">
                <select id="langSelect" name="langSelect" title="언어선택" class="sel">
                    <option value="ko_KR" selected>한국어</option>
                    <option value="en_US">English</option>
                    <option value="zh_Hans_CN">中文(简体)</option>
                    <option value="zh_Hant_TW">中文(台灣)</option>
                </select>
            </div>
            <!-- //lang -->
        </header>
        <!-- //header -->
        <!-- content -->
        <div id="container" role="main">
            <div id="content">
                <div class="join_content">
                    <form name="joinForm" method="get" action="#">
                        <div class="terms_p">
                            <!-- 이용약관 모두 동의 -->
                            <p class="terms_chk_all">
                                <input type="checkbox" id="chkAll" name="chkAll" onclick="mainCheck()">
                                <label for="chkAll">이용약관, 개인정보 수집 및 이용, 위치정보 이용약관(선택), 프로모션 안내 메일 수신(선택)에 모두 동의합니다.</label>
                            </p>
                            <!-- //이용약관 모두 동의 -->
                            <ul class="terms_bx_list">
                                <!-- 회사 사용 이용약관 동의(필수) -->
                                <li class="terms_bx" id="box1">
                                    <span class="input_chk">
                                        <input type="checkbox" id="termsService" name="checkList" class="chk" onclick="listCheck(0);">
                                        <label for="termsService">Kimyechan 이용약관 동의<span class="terms_necessary">(필수)</span></label>
                                    </span>
                                    <div class="terms_box" tabindex="0" id="divService">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus rhoncus justo at ligula aliquet pharetra. Maecenas at justo ex. Phasellus sit amet ipsum id velit consequat placerat euismod eget orci. Ut vulputate velit a maximus convallis. Pellentesque ultricies consequat ante eu scelerisque. Etiam porta dolor vel ullamcorper tempus. Aliquam molestie dolor sed ante gravida accumsan. Fusce dignissim blandit nunc, sit amet tincidunt felis. Duis sit amet est sed neque fringilla scelerisque. Phasellus rhoncus neque eu imperdiet molestie. Praesent finibus diam erat, ac sollicitudin augue placerat ac. Proin aliquam a urna ut dictum. Duis hendrerit molestie nunc.</div>
                                </li>
                                <!-- //회사 사용 이용약관 동의 -->
                                <!-- 개인 정보 수집 및 이용 안내(필수) -->
                                <li class="terms_bx" id="box2">
                                    <span class="input_chk">
                                        <input type="checkbox" id="termsPrivacy" name="checkList" class="chk" onclick="listCheck(1);">
                                        <label for="termsPrivacy">개인정보 수집 및 이용에 대한 안내<span class="terms_necessary">(필수)</span></label>
                                    </span>
                                    <div class="terms_box" tabindex="0" id="divPrivacy">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus rhoncus justo at ligula aliquet pharetra. Maecenas at justo ex. Phasellus sit amet ipsum id velit consequat placerat euismod eget orci. Ut vulputate velit a maximus convallis. Pellentesque ultricies consequat ante eu scelerisque. Etiam porta dolor vel ullamcorper tempus. Aliquam molestie dolor sed ante gravida accumsan. Fusce dignissim blandit nunc, sit amet tincidunt felis. Duis sit amet est sed neque fringilla scelerisque. Phasellus rhoncus neque eu imperdiet molestie. Praesent finibus diam erat, ac sollicitudin augue placerat ac. Proin aliquam a urna ut dictum. Duis hendrerit molestie nunc.</div>
                                </li>
                                <!-- //개인 정보 수집 및 이용 안내 -->
                                <!-- 위치 정보 이용약관 동의(선택) -->
                                <li class="terms_bx" id="box3">
                                    <span class="input_chk">
                                        <input type="checkbox" id="termsLocation" name="checkList" class="chk" onclick="listCheck(2);">
                                        <label for="termsLocation">위치정보 이용약관 동의<span class="terms_choice">(선택)</span></label>
                                    </span>
                                    <div class="terms_box" tabindex="0" id="divLocation">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus rhoncus justo at ligula aliquet pharetra. Maecenas at justo ex. Phasellus sit amet ipsum id velit consequat placerat euismod eget orci. Ut vulputate velit a maximus convallis. Pellentesque ultricies consequat ante eu scelerisque. Etiam porta dolor vel ullamcorper tempus. Aliquam molestie dolor sed ante gravida accumsan. Fusce dignissim blandit nunc, sit amet tincidunt felis. Duis sit amet est sed neque fringilla scelerisque. Phasellus rhoncus neque eu imperdiet molestie. Praesent finibus diam erat, ac sollicitudin augue placerat ac. Proin aliquam a urna ut dictum. Duis hendrerit molestie nunc.</div>
                                </li>
                                <!-- //위치 정보 이용약관 동의(선택) -->
                                <!-- 이벤트 등 프로모션 알림 메일 수신(선택) -->
                                <li class="terms_bx" id="box4">
                                    <span class="input_chk">
                                        <input type="checkbox" id="termsEmail" name="checkList" class="chk" onclick="listCheck(3);">
                                        <label for="termsEmail">이벤트 등 프로모션 알림 메일 수신<span class="terms_choice">(선택)</span></label>
                                </li>  
                                <!-- //이벤트 등 프로모션 알림 메일 수신(선택) -->
                            </ul>
                        </div>
                        <!-- 취소, 확인란 -->
                        <div class="btn_area double">
                            <span><a href="#" id="btnCancel" class="btn_type btn_default" role="button">취소</a></span>
                            <span><a href="./register.html" id="btnCancel" class="btn_type btn_primary" role="button" onclick="this.href=goRegiterPage();">확인</a></span>
                        </div>
                        <!-- //취소, 확인란 -->
                    </form>
                    <!-- 단체 회원 가입 -->
                    <div class="group_join">
                        회사, 동아리 등 단체에서 사용할 ID가 필요하세요?
                        <a href="#" class="btn_group_join">단체 회원 가입</a>
                    </div>
                    <!-- //단체 회원 가입 -->
                </div>
            </div>
        </div>
        <!-- //content -->
        <!-- footer -->
        <footer id="footer" role="contentinfo">
            <ul>
                <li><a href="#" id="first">이용약관</a></li>
                <li><a href="#">개인정보처리방침</a></li>
                <li><a href="#">책임의 한계와 법적고지</a></li>
                <li><a href="#">회원정보 고객센터</a></li>
            </ul>
            <address>
                <div id="copyright">copyright c <strong>(주)Kimyechan</strong> All Right Reserved.</div>
            </address>
            <!-- //address 영역 -->
        </footer>
        <!-- //footer -->
    </div>
    <!-- //all -->
</body>
</html>